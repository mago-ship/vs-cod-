Crie um sistema web completo em Flask com as seguintes funcionalidades:

ğŸ§± 1. Banco de Dados:
- Use Flask-SQLAlchemy com SQLite
- Crie as tabelas:
  â€¢ `User`: id, username, email, password_hash
  â€¢ `Subscription`: id, user_id (foreign key), plano (mensal, trimestral, vitalicio, vip), status (pendente, ativo), data_inicio, data_expiracao
- Ao registrar novo usuÃ¡rio:
  â€¢ Se o e-mail for "ofigura.2012@gmail.com", atribua automaticamente plano 'vip', status 'ativo' e acesso vitalÃ­cio
  â€¢ Para os demais, registre plano 'gratuito' ou 'pendente'

ğŸ” 2. Registro e Login:
- Rota `/register`: formulÃ¡rio com username, email, senha, confirmar senha
- Rota `/login`: login por email e senha
- Use `Flask-Login` para gerenciar sessÃµes
- ApÃ³s login, verifique o status e validade do plano no banco
  â€¢ Se for 'ativo', redireciona para `/enviar`
  â€¢ Se for 'pendente' ou expirado, redireciona para `/plano`

ğŸ’³ 3. PÃ¡gina de Planos `/plano`:
- Mostre as opÃ§Ãµes:
  â€¢ Mensal â€“ R$30 â€“ 30 dias
  â€¢ Trimestral â€“ R$70 â€“ 90 dias
  â€¢ VitalÃ­cio â€“ R$199 â€“ acesso permanente
- Mostre qual plano o usuÃ¡rio possui atualmente
- Crie botÃµes de pagamento usando Mercado Pago com:
  â€¢ Access Token: APP_USR-5413260080815389-072322-601ba0b9ffad2be1002cff3221949fb8-236429747
- Gere links de pagamento para cada plano com descriÃ§Ã£o e valor corretos
- Crie rota `/retorno_pagamento` como callback
  â€¢ Quando o Mercado Pago confirmar o pagamento, atualize no banco:
    - plano = adquirido
    - status = ativo
    - data_inicio = hoje
    - data_expiracao = hoje + dias do plano (exceto vitalÃ­cio)

ğŸ’¡ Extra: Inclua botÃ£o "JÃ¡ paguei" como alternativa manual para testes

ğŸ“¤ 4. PÃ¡gina `/enviar`:
- Somente acessÃ­vel para usuÃ¡rios com plano ativo
- FormulÃ¡rio com:
  â€¢ E-mail remetente
  â€¢ Senha do app Gmail
  â€¢ Assunto
  â€¢ Corpo da mensagem
  â€¢ Upload de `.txt`, `.csv` ou `.xlsx`
- Leia os e-mails do arquivo (primeira coluna), remova duplicados
- Envie os e-mails um por um com `smtplib` e `email.mime`, delay de 2 segundos

ğŸ¨ 5. Visual:
- Use Bootstrap (ou Tailwind) para deixar a interface limpa e moderna
- Mostre nome do usuÃ¡rio, tipo e status do plano no topo
- Inclua botÃ£o de logout
- Telas separadas para login, registro, plano, envio

âš ï¸ 6. SeguranÃ§a:
- Nunca exponha a access token diretamente no HTML
- Proteja as rotas com `@login_required`
- Use hash de senha com `werkzeug.security`

ğŸ“¦ 7. DependÃªncias:
- flask
- flask_sqlalchemy
- flask_login
- werkzeug
- mercadopago
- pandas
- openpyxl
- smtplib, email.mime

Resultado: um sistema profissional, com controle de planos por assinatura, login/registro, pagamentos Mercado Pago, e envio individual de e-mails somente para usuÃ¡rios ativos. A conta "ofigura.2012@gmail.com" deve ter acesso total e vitalÃ­cio.
